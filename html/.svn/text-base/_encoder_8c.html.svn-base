<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Encoder.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Encoder.c File Reference</h1><code>#include &quot;<a class="el" href="_encoder_8h_source.html">Encoder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_simple___serial_8h_source.html">Simple_Serial.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_s_p_i_8h_source.html">SPI.h</a>&quot;</code><br/>
<code>#include &quot;PortIO.h&quot;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &lt;avr/io.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="union_e_n_c_o_d_e_r___c_o_m_m_a_n_d.html">ENCODER_COMMAND</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="union_e_n_c_o_d_e_r___m_d_r0.html">ENCODER_MDR0</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="union_e_n_c_o_d_e_r___m_d_r1.html">ENCODER_MDR1</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a59a3ab02bc14f1364656f2c1c22c1b62">RSNONE</a>&nbsp;&nbsp;&nbsp;0b000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a950703e99e64ea28e7ce6e69a9a7c67a">RSMDR0</a>&nbsp;&nbsp;&nbsp;0b001</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a5bcb3e5392678692021fd012b967d32b">RSMDR1</a>&nbsp;&nbsp;&nbsp;0b010</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a4dc4e9c3f78896753b7877997960eb90">RSDTR</a>&nbsp;&nbsp;&nbsp;0b011</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#ae107e7b811dfbeffdd60e695d2cd5338">RSCNTR</a>&nbsp;&nbsp;&nbsp;0b100</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#aaf94d748527bf71283597ea5b33e8815">RSOTR</a>&nbsp;&nbsp;&nbsp;0b101</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#ab79d179b5cc70813aeb187275f64517a">RSSTR</a>&nbsp;&nbsp;&nbsp;0b110</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a351c98edee3914e8d987b838fe0cb06e">CCLR</a>&nbsp;&nbsp;&nbsp;0b00</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a43ac2501fb0a91b3bde8378ccdec6518">CRD</a>&nbsp;&nbsp;&nbsp;0b01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a019e60770a8133ba4c721014ade552df">CWR</a>&nbsp;&nbsp;&nbsp;0b10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a1c27b5b63f4340f43e0fc7addeb741f8">CLOAD</a>&nbsp;&nbsp;&nbsp;0b11</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf65054d2d4d3688f6541029051024bc"></a><!-- doxytag: member="Encoder.c::Encoder_Initialize_SPI" ref="aaf65054d2d4d3688f6541029051024bc" args="()" -->
char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#aaf65054d2d4d3688f6541029051024bc">Encoder_Initialize_SPI</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the AVR's hardware SPI to communicate with the LS7366R encoder chip. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a1ccb07419fb199d6095869ba7eac4e0b">Encoder_Generate_Command</a> (unsigned char encCommand, <a class="el" href="union_e_n_c_o_d_e_r___c_o_m_m_a_n_d.html">ENCODER_COMMAND</a> *genCom)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generates a valid LS7366R encoder chip command.  <a href="#a1ccb07419fb199d6095869ba7eac4e0b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7573f7faef5813c273fe7c06d55bce13"></a><!-- doxytag: member="Encoder.c::Encoder_Initialize" ref="a7573f7faef5813c273fe7c06d55bce13" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a7573f7faef5813c273fe7c06d55bce13">Encoder_Initialize</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the LS7366R encoder chip for use with the EDUarm. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_encoder_8c.html#a5770b79eb51a21ea2dd707125a4bd358">Encoder_Read</a> (char command, long *result)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads from a register on the LS7366R encoder chip.  <a href="#a5770b79eb51a21ea2dd707125a4bd358"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="date"><dt><b>Date:</b></dt><dd>Feb 19, 2010 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Adam Panzica </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a351c98edee3914e8d987b838fe0cb06e"></a><!-- doxytag: member="Encoder.c::CCLR" ref="a351c98edee3914e8d987b838fe0cb06e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CCLR&nbsp;&nbsp;&nbsp;0b00</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Perform a clear command </p>

</div>
</div>
<a class="anchor" id="a1c27b5b63f4340f43e0fc7addeb741f8"></a><!-- doxytag: member="Encoder.c::CLOAD" ref="a1c27b5b63f4340f43e0fc7addeb741f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLOAD&nbsp;&nbsp;&nbsp;0b11</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Perform a load command </p>

</div>
</div>
<a class="anchor" id="a43ac2501fb0a91b3bde8378ccdec6518"></a><!-- doxytag: member="Encoder.c::CRD" ref="a43ac2501fb0a91b3bde8378ccdec6518" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRD&nbsp;&nbsp;&nbsp;0b01</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Perform a read command </p>

</div>
</div>
<a class="anchor" id="a019e60770a8133ba4c721014ade552df"></a><!-- doxytag: member="Encoder.c::CWR" ref="a019e60770a8133ba4c721014ade552df" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CWR&nbsp;&nbsp;&nbsp;0b10</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Perform a write command </p>

</div>
</div>
<a class="anchor" id="ae107e7b811dfbeffdd60e695d2cd5338"></a><!-- doxytag: member="Encoder.c::RSCNTR" ref="ae107e7b811dfbeffdd60e695d2cd5338" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RSCNTR&nbsp;&nbsp;&nbsp;0b100</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Selects CNTR register </p>

</div>
</div>
<a class="anchor" id="a4dc4e9c3f78896753b7877997960eb90"></a><!-- doxytag: member="Encoder.c::RSDTR" ref="a4dc4e9c3f78896753b7877997960eb90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RSDTR&nbsp;&nbsp;&nbsp;0b011</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Selects DTR register </p>

</div>
</div>
<a class="anchor" id="a950703e99e64ea28e7ce6e69a9a7c67a"></a><!-- doxytag: member="Encoder.c::RSMDR0" ref="a950703e99e64ea28e7ce6e69a9a7c67a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RSMDR0&nbsp;&nbsp;&nbsp;0b001</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Selects MDR0 register </p>

</div>
</div>
<a class="anchor" id="a5bcb3e5392678692021fd012b967d32b"></a><!-- doxytag: member="Encoder.c::RSMDR1" ref="a5bcb3e5392678692021fd012b967d32b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RSMDR1&nbsp;&nbsp;&nbsp;0b010</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Selects MDR1 register </p>

</div>
</div>
<a class="anchor" id="a59a3ab02bc14f1364656f2c1c22c1b62"></a><!-- doxytag: member="Encoder.c::RSNONE" ref="a59a3ab02bc14f1364656f2c1c22c1b62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RSNONE&nbsp;&nbsp;&nbsp;0b000</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Selects no register </p>

</div>
</div>
<a class="anchor" id="aaf94d748527bf71283597ea5b33e8815"></a><!-- doxytag: member="Encoder.c::RSOTR" ref="aaf94d748527bf71283597ea5b33e8815" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RSOTR&nbsp;&nbsp;&nbsp;0b101</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Selects OTR register </p>

</div>
</div>
<a class="anchor" id="ab79d179b5cc70813aeb187275f64517a"></a><!-- doxytag: member="Encoder.c::RSSTR" ref="ab79d179b5cc70813aeb187275f64517a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RSSTR&nbsp;&nbsp;&nbsp;0b110</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Selects STR register </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a1ccb07419fb199d6095869ba7eac4e0b"></a><!-- doxytag: member="Encoder.c::Encoder_Generate_Command" ref="a1ccb07419fb199d6095869ba7eac4e0b" args="(unsigned char encCommand, ENCODER_COMMAND *genCom)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Encoder_Generate_Command </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>encCommand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="union_e_n_c_o_d_e_r___c_o_m_m_a_n_d.html">ENCODER_COMMAND</a> *&nbsp;</td>
          <td class="paramname"> <em>genCom</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates a valid LS7366R encoder chip command. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>encCommand</em>&nbsp;</td><td>Command number to be generated </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*genCom</em>&nbsp;</td><td>Pointer to an <a class="el" href="union_e_n_c_o_d_e_r___c_o_m_m_a_n_d.html">ENCODER_COMMAND</a> union to store the generate command to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5770b79eb51a21ea2dd707125a4bd358"></a><!-- doxytag: member="Encoder.c::Encoder_Read" ref="a5770b79eb51a21ea2dd707125a4bd358" args="(char command, long *result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char Encoder_Read </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads from a register on the LS7366R encoder chip. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>command</em>&nbsp;</td><td>A valid encoder command. Use the symbolic constants in <a class="el" href="_encoder_8h.html">Encoder.h</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*result</em>&nbsp;</td><td>pointer to a long value to store the result to</td></tr>
  </table>
  </dd>
</dl>
<p>This function reads from a register on the LS7366R encoder chip over SPI. It stores the result to the location pointed to by *result. NOTE: Not all registers are longs (and depending on configuration, none of them might be), so it is up to the user to interpret the returned value correctly. For READCNT commands, if the CNTR register is set to be less than 4 bytes, it will store the returned data in the upper n bytes of the long, MSBF, where n is the number of bytes CNTR is set up to be. For all other commands, it stores the value in the lower bytes. NOTE: Interrupts are disabled while this operation communicates over the SPI bus. Care should be taken that critical interrupts do not happen during the operation, as they will be ignored. </p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
