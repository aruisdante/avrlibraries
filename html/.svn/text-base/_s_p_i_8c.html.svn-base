<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SPI.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>SPI.c File Reference</h1>
<p>Library of functions for SPI.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="_s_p_i_8h_source.html">SPI.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_simple___serial_8h_source.html">Simple_Serial.h</a>&quot;</code><br/>
<code>#include &lt;avr/io.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i_8c.html#adc9b2eec8a09ebb424bb3cfd5cf9f5e1">SPI_Initialize</a> (char master, char dataOder, char clockPolarity, char clockPhase)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize SPI for polling use.  <a href="#adc9b2eec8a09ebb424bb3cfd5cf9f5e1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i_8c.html#a2d073d9e14f183d7fdf5b786285fb5d7">SPI_Send_Byte</a> (char cData)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a byte on the SPI bus.  <a href="#a2d073d9e14f183d7fdf5b786285fb5d7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i_8c.html#ac1d3fca78fe79505d2476878b2ccfc89">SPI_Read_Byte</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this function reads a byte of the AVR's hardware SPI port  <a href="#ac1d3fca78fe79505d2476878b2ccfc89"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i_8c.html#aad6249c5ecf671ac8b75b4b17943f762">SPI_Send_Packet</a> (char *packet, int length, char SSPin)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a packet over the SPI bus.  <a href="#aad6249c5ecf671ac8b75b4b17943f762"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i_8c.html#a20ddbb3181de38de881b5044fb57ab8e">SPI_Read_Packet</a> (char *packet, int length, char SSPin)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a packet over the SPI bus.  <a href="#a20ddbb3181de38de881b5044fb57ab8e"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Library of functions for SPI. </p>
<p>This source file contains a library of functions to utilize the AVR's hardware SPI interface</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Adam Panzica </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>27-Jan-2009 </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.0 Initial version with <a class="el" href="_s_p_i_8c.html#adc9b2eec8a09ebb424bb3cfd5cf9f5e1" title="Initialize SPI for polling use.">SPI_Initialize()</a>, <a class="el" href="_s_p_i_8c.html#a2d073d9e14f183d7fdf5b786285fb5d7" title="Send a byte on the SPI bus.">SPI_Send_Byte()</a>, <a class="el" href="_s_p_i_8c.html#aad6249c5ecf671ac8b75b4b17943f762" title="Send a packet over the SPI bus.">SPI_Send_Packet()</a> </dd>
<dd>
1.1 Modified SPI_Intialize() to remove chance of the default SPI_SS pin on the AVR being set to an input and low, which would clear the master flag in SPSR </dd></dl>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="adc9b2eec8a09ebb424bb3cfd5cf9f5e1"></a><!-- doxytag: member="SPI.c::SPI_Initialize" ref="adc9b2eec8a09ebb424bb3cfd5cf9f5e1" args="(char master, char dataOder, char clockPolarity, char clockPhase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char SPI_Initialize </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>master</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>dataOder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>clockPolarity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>clockPhase</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize SPI for polling use. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>master</em>&nbsp;</td><td>selects between master and slave. Use symbolic constants in <a class="el" href="_s_p_i_8h.html" title="Header file for SPI library.">SPI.h</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dataOder</em>&nbsp;</td><td>selects between MSB first and LSB first. Use symbolic constants in <a class="el" href="_s_p_i_8h.html" title="Header file for SPI library.">SPI.h</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>clockPolarity</em>&nbsp;</td><td>selects the clock polarity mode. Use symbolic constants in <a class="el" href="_s_p_i_8h.html" title="Header file for SPI library.">SPI.h</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>clockPhase</em>&nbsp;</td><td>selects the clock phase mode. Use symbolic constants in <a class="el" href="_s_p_i_8h.html" title="Header file for SPI library.">SPI.h</a></td></tr>
  </table>
  </dd>
</dl>
<p>This function initializes the hardware SPI controller </p>

</div>
</div>
<a class="anchor" id="ac1d3fca78fe79505d2476878b2ccfc89"></a><!-- doxytag: member="SPI.c::SPI_Read_Byte" ref="ac1d3fca78fe79505d2476878b2ccfc89" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPI_Read_Byte </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this function reads a byte of the AVR's hardware SPI port </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>8bit value from the SPI port </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Due to the way the hardware SPI port works on the AVR, this function clocks out zeros on the MOSI port as it is clocking in on MISO. Ensure that this does not cause problems </dd></dl>

</div>
</div>
<a class="anchor" id="a20ddbb3181de38de881b5044fb57ab8e"></a><!-- doxytag: member="SPI.c::SPI_Read_Packet" ref="a20ddbb3181de38de881b5044fb57ab8e" args="(char *packet, int length, char SSPin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char SPI_Read_Packet </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>SSPin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send a packet over the SPI bus. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*packet</em>&nbsp;</td><td>pointer to an array of bytes to store the packet to be red over the SPI bus </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>length of the packet, in bytes </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>SSPin</em>&nbsp;</td><td>Pin on port B to use as slave select</td></tr>
  </table>
  </dd>
</dl>
<p>This function reads a packet of data over the SPI bus </p>

</div>
</div>
<a class="anchor" id="a2d073d9e14f183d7fdf5b786285fb5d7"></a><!-- doxytag: member="SPI.c::SPI_Send_Byte" ref="a2d073d9e14f183d7fdf5b786285fb5d7" args="(char cData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char SPI_Send_Byte </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>cData</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send a byte on the SPI bus. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cData</em>&nbsp;</td><td>byte of data to be sent on the SPI bus</td></tr>
  </table>
  </dd>
</dl>
<p>This function initializes the hardware SPI controller </p>

</div>
</div>
<a class="anchor" id="aad6249c5ecf671ac8b75b4b17943f762"></a><!-- doxytag: member="SPI.c::SPI_Send_Packet" ref="aad6249c5ecf671ac8b75b4b17943f762" args="(char *packet, int length, char SSPin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char SPI_Send_Packet </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>SSPin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send a packet over the SPI bus. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*packet</em>&nbsp;</td><td>pointer to an array of bytes containing the packet to be sent over the SPI bus </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>length of the packet, in bytes </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>SSPin</em>&nbsp;</td><td>Pin on port B to use as slave select</td></tr>
  </table>
  </dd>
</dl>
<p>This function sends a packet of data over the SPI bus </p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
