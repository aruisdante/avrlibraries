<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PID.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PID.h File Reference</h1>
<p>Header for library of functions for PID control.  
<a href="#_details">More...</a></p>

<p><a href="_p_i_d_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_i_d___c_h_a_n_n_e_l.html">PID_CHANNEL</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">this strcut defines a <a class="el" href="struct_p_i_d___c_h_a_n_n_e_l.html" title="this strcut defines a PID_CHANNEL object">PID_CHANNEL</a> object  <a href="struct_p_i_d___c_h_a_n_n_e_l.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_o_t___a_n_g_l_e.html">POT_ANGLE</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_i_d_8h.html#ac666fb194d5951dcc845a122d01537d3">UPDATEFREQ</a>&nbsp;&nbsp;&nbsp;100</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_i_d_8h.html#aa1119e5ecd1e98ca065e95119574fc05">PID_Initialize</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes PID control.  <a href="#aa1119e5ecd1e98ca065e95119574fc05"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_p_i_d___c_h_a_n_n_e_l.html">PID_CHANNEL</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_i_d_8h.html#a02244c901f74e20799bfcbc68dd71042">PID_Add_Channel</a> (int *target, int *current, int *correctionValue, int *LMDVal, int Kp, int Ki, int Kd, char spool)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds a PID channel to the PID controller.  <a href="#a02244c901f74e20799bfcbc68dd71042"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_p_o_t___a_n_g_l_e.html">POT_ANGLE</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_i_d_8h.html#a82cfc28fad26c6af7b6d5b2f044a78b5">Add_Pot_Angle</a> (int valMax, int angMax, int valMin, int angMin, char *name, char channel)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function creates a <a class="el" href="struct_p_o_t___a_n_g_l_e.html">POT_ANGLE</a> struct.  <a href="#a82cfc28fad26c6af7b6d5b2f044a78b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_i_d_8h.html#ac05daeebea73d0c1095389331b55eeae">Pot_To_Degrees</a> (int potVal, int channel)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts a 10bit pot value to an angle in degrees.  <a href="#ac05daeebea73d0c1095389331b55eeae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_i_d_8h.html#aa3a17ec06666bff62c3227cfc8d9d4aa">Degrees_To_Pot</a> (int degrees, int channel)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts an angle in degrees to a 10bit pot value.  <a href="#aa3a17ec06666bff62c3227cfc8d9d4aa"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Header for library of functions for PID control. </p>
<dl class="date"><dt><b>Date:</b></dt><dd>Feb 2, 2010 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Adam Panzica </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.0 First implementation of the <a class="el" href="struct_p_i_d___c_h_a_n_n_e_l.html" title="this strcut defines a PID_CHANNEL object">PID_CHANNEL</a> struct </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ac666fb194d5951dcc845a122d01537d3"></a><!-- doxytag: member="PID.h::UPDATEFREQ" ref="ac666fb194d5951dcc845a122d01537d3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UPDATEFREQ&nbsp;&nbsp;&nbsp;100</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>update frequency for the PID controller </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a82cfc28fad26c6af7b6d5b2f044a78b5"></a><!-- doxytag: member="PID.h::Add_Pot_Angle" ref="a82cfc28fad26c6af7b6d5b2f044a78b5" args="(int valMax, int angMax, int valMin, int angMin, char *name, char channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_p_o_t___a_n_g_l_e.html">POT_ANGLE</a>* Add_Pot_Angle </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>valMax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>angMax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>valMin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>angMin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>channel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function creates a <a class="el" href="struct_p_o_t___a_n_g_l_e.html">POT_ANGLE</a> struct. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>valMax</em>&nbsp;</td><td>ADC value at maximum angle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>angMax</em>&nbsp;</td><td>Angle at maximum ADC value </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>valMin</em>&nbsp;</td><td>ADC value at minimum angle </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>angMin</em>&nbsp;</td><td>Angle at minimum ADC value </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*name</em>&nbsp;</td><td>pointer to an array of chars containing the name of the angle (max 15 chars) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>channel</em>&nbsp;</td><td>ADC channel that the pot is on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa3a17ec06666bff62c3227cfc8d9d4aa"></a><!-- doxytag: member="PID.h::Degrees_To_Pot" ref="aa3a17ec06666bff62c3227cfc8d9d4aa" args="(int degrees, int channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Degrees_To_Pot </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>degrees</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>channel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts an angle in degrees to a 10bit pot value. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>degrees</em>&nbsp;</td><td>angle in degrees </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>10bit pot value</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>degrees</em>&nbsp;</td><td>angle in degrees </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>channel</em>&nbsp;</td><td>channel to use for the conversion </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>10bit pot value </dd></dl>

</div>
</div>
<a class="anchor" id="a02244c901f74e20799bfcbc68dd71042"></a><!-- doxytag: member="PID.h::PID_Add_Channel" ref="a02244c901f74e20799bfcbc68dd71042" args="(int *target, int *current, int *correctionValue, int *LMDVal, int Kp, int Ki, int Kd, char spool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_p_i_d___c_h_a_n_n_e_l.html">PID_CHANNEL</a>* PID_Add_Channel </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>correctionValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>LMDVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Kp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Ki</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Kd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>spool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a PID channel to the PID controller. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*target</em>&nbsp;</td><td>pointer to the target value for this PID channel </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*current</em>&nbsp;</td><td>pointer to the current value for this PID channel </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*correctionValue</em>&nbsp;</td><td>pointer to a location to write the correction value from this PID channel </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*LMDVal</em>&nbsp;</td><td>pointer to a location to write the requested LMD output voltage to. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>Kp</em>&nbsp;</td><td>Proportional gain constant </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>Ki</em>&nbsp;</td><td>Integral gain constant </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>Kd</em>&nbsp;</td><td>Derivative gain constant </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>spool</em>&nbsp;</td><td>Cap value for the Integral element of the PID loop to prevent it from dominating the system </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A pointer to the added PID channel</dd></dl>
<p>This function adds a PID channel to the PID controller. It is automatically handled from the moment it is added. Communication with the controller is handled by updating the input communication vars, *target and *current. Write to target to change the value that the PID loop seeks, and update current as often as possible to ensure that the PID loop has accurate current state information. The output states of the PID loop can be checked by reading the contents of *correctionVal and *LMDVal </p>

</div>
</div>
<a class="anchor" id="aa1119e5ecd1e98ca065e95119574fc05"></a><!-- doxytag: member="PID.h::PID_Initialize" ref="aa1119e5ecd1e98ca065e95119574fc05" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PID_Initialize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes PID control. </p>
<p>This function initializes PID by setting up the 8bit timer to refresh at a set frequency. The actual PID calculations are called from the ISR for this timer </p>

</div>
</div>
<a class="anchor" id="ac05daeebea73d0c1095389331b55eeae"></a><!-- doxytag: member="PID.h::Pot_To_Degrees" ref="ac05daeebea73d0c1095389331b55eeae" args="(int potVal, int channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Pot_To_Degrees </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>potVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>channel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts a 10bit pot value to an angle in degrees. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>potVal</em>&nbsp;</td><td>10bit pot value </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>angle in degrees</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>potVal</em>&nbsp;</td><td>10bit pot value </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>channel</em>&nbsp;</td><td>channel to use for the conversion </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>angle in degrees </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
